##########################################
# üñ•Ô∏è SERVER CONFIG
##########################################

# Bind address dan port
BIND=0.0.0.0:8080
PORT=8080

# Level log Rust
RUST_LOG=info


##########################################
# üíæ STORAGE & PATHS
##########################################

# Folder penyimpanan video dan HLS segment
# (Akan di-mount ke volume Docker)
STORAGE_DIR=/data
HLS_ROOT=/tmp/hls

# Font untuk watermark
WATERMARK_FONT=/usr/share/fonts/truetype/dejavu/DejaVuSans-Bold.ttf


##########################################
# üóÑÔ∏è DATABASE CONFIG
##########################################

# URL database untuk runtime (koneksi dari container app ke service db)
DATABASE_URL=postgres://ppv:secret@db:5432/ppv_stream

# URL database untuk build-time (agar SQLx bisa akses DB saat cargo build)
# gunakan host.docker.internal agar builder container bisa terhubung ke host Docker
DATABASE_URL_BUILD=postgres://ppv:secret@host.docker.internal:5432/ppv_stream


##########################################
# üîê SECURITY & HLS SETTINGS
##########################################

# Secret key untuk generate token dan HMAC signature
HMAC_SECRET=change-this-secret-key

# TTL session token (detik)
# Nama variabel harus sama dengan config.rs -> session_token_ttl
SESSION_TOKEN_TTL=600

# Durasi setiap segmen video HLS (detik)
HLS_SEGMENT_SECONDS=6


##########################################
# üë©‚Äçüíº BOOTSTRAP ADMIN (optional)
##########################################

# Admin default untuk setup pertama kali
ADMIN_BOOTSTRAP_EMAIL=admin@example.com
ADMIN_BOOTSTRAP_PASSWORD=ChangeMe123!
ADMIN_BOOTSTRAP_TOKEN=rahasiabanget

# URL akses setup awal (gunakan hanya sekali)
# contoh: http://localhost:8080/setup_admin?token=rahasiabanget


##########################################
# üê≥ DOCKER BUILD SETTINGS
##########################################

# Nama image dan build revision otomatis
APP_NAME=ppv_stream
IMAGE_TAG=$(APP_NAME):dev
BUILD_REV=$(shell date +%s)

# Gunakan Docker Compose v2
COMPOSE=docker compose
