<!-- public/admin/login.html -->
<!doctype html>
<meta charset="utf-8">
<title>Admin Login</title>
<link rel="stylesheet" href="/public/styles.css">

<style>
  .alert{padding:10px;border-radius:8px;margin:12px 0;font-size:14px;line-height:1.4}
  .alert.ok{background:#e8f5e9;border:1px solid #a5d6a7}
  .alert.fail{background:#ffebee;border:1px solid #ef9a9a}
  .field{display:block;margin:8px 0}
  .row{display:flex;align-items:center;gap:6px}
</style>

<h1>Admin Login</h1>

<div id="alert" class="alert" style="display:none"></div>

<form method="post" action="/admin/login">
  <label class="field">Email <input name="email" type="email" required></label>
  <label class="field">
    Password
    <div class="row">
      <input id="adminPassword" name="password" type="password" required>
      <button type="button" id="toggleAdminPass" title="Tahan mouse untuk melihat password">👁️</button>
    </div>
  </label>
  <button>Login</button>
</form>

<script>
/* Toggle password */
const adminPass = document.getElementById('adminPassword');
const toggleAdminPass = document.getElementById('toggleAdminPass');
toggleAdminPass.addEventListener('mousedown', () => { adminPass.type = 'text'; toggleAdminPass.textContent = '🙈'; });
toggleAdminPass.addEventListener('mouseup',   () => { adminPass.type = 'password'; toggleAdminPass.textContent = '👁️'; });
toggleAdminPass.addEventListener('mouseleave',() => { adminPass.type = 'password'; toggleAdminPass.textContent = '👁️'; });

/* Alert status & reason */
(function () {
  const box = document.getElementById('alert');
  const p = new URLSearchParams(location.search);
  const status = p.get('status');
  const reason = p.get('reason');

  if (!status) return;

  const map = {
    missing_field: 'Lengkapi semua field.',
    bad_credentials: 'Email atau password salah.',
    not_admin: 'Akses admin ditolak.',
    server_error: 'Terjadi masalah di server. Coba lagi.',
  };

  let msg = status === 'ok'
    ? 'Login admin berhasil.'
    : (map[reason] || `Login admin gagal. (${reason || 'unknown'})`);

  box.textContent = msg;
  box.classList.add(status === 'ok' ? 'ok' : 'fail');
  box.style.display = 'block';
})();
</script>
